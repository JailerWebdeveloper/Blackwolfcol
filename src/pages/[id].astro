---
export const prerender = false;
import Layout from "../layouts/Layout.astro";
import { GetIDproduct } from "../services/GetIDproduct.js";
import AddToCartButton from "../components/AddtoCar.jsx";

const { id } = Astro.params;
const product = await GetIDproduct(id);
if (product === "NotFound") {
  return Astro.redirect("/404"); // Redirect to 404 page if product not found
}
const resImage = product.producto.Imagen;
---

<Layout title="">
  <section class="h-full overflow-auto">
    <div class="container px-5 py-10 mx-auto">
      <div class="lg:w-4/5 mx-auto flex flex-wrap">
        <img
          alt="ecommerce"
          class="lg:w-1/2 w-full h-[400px] object-contain border-2 rounded-2xl"
          src=`https://backend-wolf-psi.vercel.app/imagen/${resImage}`
        />
        <div class="lg:w-1/2 w-full lg:pl-10 lg:py-6 mt-6 lg:mt-0">
          <h2 class="ml-3 text-sm title-font text-gray-500 tracking-widest">
            Blackwolf_Col
          </h2>
          <h1
            class="text-black text-5xl roboto font-extrabold tracking-wide mb-5"
          >
            {product.producto.NombreProducto}
          </h1>
          <p class="font-bold uppercase text-black antialised mt-5 text-4xl">
            ${product.producto.Precio}
          </p>
          <p class="leading-relaxed mt-5">
            {product.producto.Descripcion}
          </p>
          <div class="divider max-auto rounded-full"></div>
   
          <AddToCartButton
            client:load
            id={id}
            producto={product.producto}
          />
        </div>
      </div>
    </div>
  </section>
</Layout>
